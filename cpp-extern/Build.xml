<xml>

<!-- Build file for hxgl.ndll -->
<!-- Install hxcpp and run with 'haxelib run hxcpp Build.xml' -->

<include name="${HXCPP}/build-tool/BuildCommon.xml"/>

<set name="DBG" value="d" if="debug"/>
<set name="mobile" value="1" if="iphone"/>
<set name="mobile" value="1" if="android"/>

<set name="tool" value="static" if="iphone"/>
<set name="ndll-tool" value="dll" unless="iphone"/>
<set name="ndll-tool" value="static" if="iphone"/>
<set name="name_extra" value=".iphoneos" if="iphoneos"/>
<set name="name_extra" value=".iphonesim" if="iphonesim"/>

<vflag name="-framework" value="OpenGLES" if="iphone"/>
<vflag name="-framework" value="UIKit" if="iphone"/>
<vflag name="-framework" value="Foundation" if="iphone"/>
<vflag name="-framework" value="QuartzCore" if="iphone"/>


<files id="files">
   <compilerflag value = "-Iinclude"/> 
   <compilerflag value = "-DGLEW_STATIC" if="windows"/>

   <file name="wnd/SFML_WND.cpp" unless="mobile"></file>

   <file name="glwrapper/GLES11.cpp"></file>
   <file name="glwrapper/GLES20.cpp"></file>

    <file name="platform/IPlatform.cpp"></file>
    <file name="platform/Windows.cpp" if="windows"></file>
	<file name="platform/IPhone.mm" if="iphone"></file>

   <file name="App.cpp"></file>

   <file name="platform/Linux.cpp" if="linux"></file>
   
   <file name="platform/Android.cpp" if="android"></file>

   
   
   <file name="wnd/DummyWnd.cpp" if="mobile"></file>

   
</files>

<target id="hxgl.ndll" tool="linker" toolid="${ndll-tool}" output="hxgl${name_extra}">
   <files id="files"/>
   <ext value=".ndll" unless="mobile"/>
   <outdir name="../ndll/linux" if="linux"/>
   <outdir name="../ndll/windows" if="windows"/>
   <outdir name="../ndll/android" if="android"/>
   <outdir name="../ndll/iphoneos" if="iphone"/>
   <flag value="${LIB_DIR}"/>  

   <lib name="sfml-system.lib" if="windows"/>
   <lib name="sfml-window.lib" if="windows"/>
   <lib name="glew32s.lib" if="windows"/>
   <lib name="user32.lib" if="windows"/>
   <lib name="gdi32.lib" if="windows"/>   
   <lib name="opengl32.lib" if="windows"/>

   <lib name="-lGLESv1_CM" if="android"/>
   <lib name="-lGLESv2" if="android"/>

   <lib name="-lsfml-window" if="linux"/>
   <lib name="-lGLEW" if="linux"/>
</target>

<target id="default">
   <target id="hxgl.ndll"/>
	
</target>


</xml>
